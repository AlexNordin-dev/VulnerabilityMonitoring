namespace VulnerabilityMonitoring.Services.Account;

public interface IProfileService
{
    Task<string> UploadProfileImageAsync(IFormFile profilImage);
}
public class ProfileService : IProfileService
{
    private readonly IWebHostEnvironment _environment;

    public ProfileService(IWebHostEnvironment environment)
    {
        _environment = environment;

    }

    public async Task<string> UploadProfileImageAsync(IFormFile profilImage)
    {
        var wwwroot = $"{_environment.WebRootPath}/Image/Profile";
        var imageName = $"profile_{Guid.NewGuid()}{Path.GetExtension(profilImage.FileName)}";
        string filePath = $"{wwwroot}/{imageName}";

        using var fs = new FileStream(filePath, FileMode.Create);
        await profilImage.CopyToAsync(fs);
        return imageName;
    }
}
